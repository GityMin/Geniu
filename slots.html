<!DOCTYPE html>
<html lang="ru">
<head>
    <title>–°–ª–æ—Ç—ã –ú–ú–ú V2 | –î–µ–Ω–∏—Å –ö–∞–∑–∞–∫–æ–≤, –ì–µ–Ω–∏–π</title>
    <style>
        /* –ì–õ–û–ë–ê–õ–¨–ù–´–ï –°–¢–ò–õ–ò */
        body { font-family: 'Arial', sans-serif; background-color: #0d0d0d; color: #E0E0E0; text-align: center; padding-top: 50px; }
        .nav-bar { background-color: #333; padding: 10px 0; margin-bottom: 30px; }
        .nav-bar a { color: #fff; padding: 14px 20px; text-decoration: none; font-size: 18px; font-weight: bold; }
        .nav-bar a:hover { background-color: #575757; }
        h1 { color: #FF0000; text-shadow: 0 0 10px #FFD700; }
        
        /* –ü–∞–Ω–µ–ª—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –±–∞–ª–∞–Ω—Å */
        .info-panel { display: flex; justify-content: center; gap: 50px; margin-bottom: 30px; }
        #money-display { font-size: 2.5em; color: #00FF00; font-weight: bold; }
        
        /* –û—Å–Ω–æ–≤–Ω–∞—è –º–∞—à–∏–Ω–∞ */
        .slot-machine {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 5px;
            margin: 0 auto;
            width: 500px;
            padding: 20px;
            background: linear-gradient(to right, #333 0%, #444 100%);
            border-radius: 15px;
            border: 5px solid #FFD700;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
        }
        
        /* –ë–∞—Ä–∞–±–∞–Ω—ã */
        .reel-housing {
            overflow: hidden;
            width: 100px;
            height: 120px;
            border: 3px solid #111;
            background-color: #000;
            border-radius: 5px;
        }
        .slot-reel {
            font-size: 4em;
            line-height: 120px;
            color: #FFD700;
            transition: transform 0.3s ease-out;
        }

        /* –†—É—á–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ */
        .controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-left: 30px;
        }
        #spin-button {
            padding: 15px 30px;
            font-size: 1.2em;
            font-weight: bold;
            background-color: #C00000;
            color: white;
            border: 4px solid #FFD700;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 0 6px #8B0000;
            transition: all 0.1s;
        }
        #spin-button:active:not(:disabled), #spin-button.pulling {
            transform: translateY(3px);
            box-shadow: 0 3px #8B0000;
        }
        #spin-button:disabled {
            background-color: #555;
            cursor: not-allowed;
            box-shadow: none;
        }

        /* –°—Ç–∞–≤–∫–∞ */
        .bet-control { margin-top: 20px; display: flex; align-items: center; justify-content: center; gap: 10px; }
        #bet-input { padding: 8px; font-size: 1.1em; width: 60px; text-align: center; border: 2px solid #FFD700; background-color: #222; color: white; border-radius: 5px; }

        /* –°–æ–æ–±—â–µ–Ω–∏–µ */
        #result-message { font-size: 1.8em; margin-top: 30px; min-height: 40px; color: #FF00FF; text-shadow: 0 0 5px #FF00FF; }
    </style>
</head>
<body>
    <div class="nav-bar">
        <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="games.html">–ò–≥—Ä—ã</a>
        <a href="about.html">–ê–≤—Ç–æ—Ä</a>
    </div>

    <h1>üî• –ò–≥—Ä–æ–≤–æ–π –ê–≤—Ç–æ–º–∞—Ç: "–ì–µ–Ω–∏–π –£–º–Ω–æ–∂–µ–Ω–∏—è" üî•</h1>
    
    <div class="info-panel">
        <div id="money-display">–ë–∞–ª–∞–Ω—Å: 0</div>
    </div>

    <div class="bet-control">
        <label for="bet-input">–¢–≤–æ—è –°—Ç–∞–≤–∫–∞:</label>
        <input type="number" id="bet-input" value="10" min="1" step="1">
    </div>

    <div class="slot-machine">
        <div class="reel-housing"><div class="slot-reel" id="reel1">?</div></div>
        <div class="reel-housing"><div class="slot-reel" id="reel2">?</div></div>
        <div class="reel-housing"><div class="slot-reel" id="reel3">?</div></div>
        
        <div class="controls">
            <button id="spin-button">–î–Å–†–ù–£–¢–¨ –†–£–ß–ö–£</button>
        </div>
    </div>

    <p id="result-message">–ü—Ä–æ–≤–µ—Ä—å —Å–≤–æ—é —É–¥–∞—á—É, –≥–µ–Ω–∏–π!</p>

    <script>
        window.onload = function() {
            const REELS = [
                document.getElementById('reel1'),
                document.getElementById('reel2'),
                document.getElementById('reel3')
            ];
            const MONEY_DISPLAY = document.getElementById('money-display');
            const SPIN_BUTTON = document.getElementById('spin-button');
            const BET_INPUT = document.getElementById('bet-input');
            const RESULT_MESSAGE = document.getElementById('result-message');
            
            // –°–∏–º–≤–æ–ª—ã: 7 (—Å–∞–º—ã–π —Ä–µ–¥–∫–∏–π), üíé, üí∞, ‚≠ê (—Å–∞–º—ã–π —á–∞—Å—Ç—ã–π)
            const SYMBOLS = ['7Ô∏è‚É£', 'üíé', 'üí∞', '‚≠ê'];
            const SYMBOL_HEIGHT = 120;
            
            let money;
            let isSpinning = false;

            // --- –§—É–Ω–∫—Ü–∏–∏ –ë–∞–ª–∞–Ω—Å–∞ –∏ –•—Ä–∞–Ω–µ–Ω–∏—è ---

            function getMoney() {
                return parseInt(localStorage.getItem('denisKazakovMoney')) || 0;
            }

            function setMoney(amount) {
                money = Math.max(0, amount);
                localStorage.setItem('denisKazakovMoney', money);
                MONEY_DISPLAY.textContent = `–ë–∞–ª–∞–Ω—Å: ${money} –ú–∞–Ω–∏`;
                
                const bet = parseInt(BET_INPUT.value);
                SPIN_BUTTON.disabled = money < bet || isSpinning;
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
            setMoney(getMoney());
            BET_INPUT.addEventListener('input', () => setMoney(getMoney()));

            // --- –§—É–Ω–∫—Ü–∏–∏ –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ –ò–≥—Ä—ã ---

            function generateSymbolStrip(totalSymbols) {
                let strip = [];
                // –ß–∞—Å—Ç–æ—Ç–∞ —Å–∏–º–≤–æ–ª–æ–≤ (7 - —Ä–µ–¥–∫–∏–π, ‚≠ê - —á–∞—Å—Ç—ã–π)
                const frequency = [1, 2, 3, 4];
                
                for (let i = 0; i < totalSymbols; i++) {
                    let totalWeight = frequency.reduce((a, b) => a + b, 0);
                    let randomNum = Math.floor(Math.random() * totalWeight);
                    
                    for (let j = 0; j < SYMBOLS.length; j++) {
                        randomNum -= frequency[j];
                        if (randomNum < 0) {
                            strip.push(SYMBOLS[j]);
                            break;
                        }
                    }
                }
                return strip;
            }

            function animateReel(reelIndex, finalSymbol) {
                const reel = REELS[reelIndex];
                const strip = generateSymbolStrip(20 + reelIndex * 5);
                
                strip.push(finalSymbol);
                
                reel.style.transition = 'none';
                reel.style.transform = 'translateY(0)';
                reel.innerHTML = strip.map(s => `<div>${s}</div>`).join('');
                
                const finalPosition = -(strip.length - 1) * SYMBOL_HEIGHT;
                
                setTimeout(() => {
                    reel.style.transition = `transform ${2 + reelIndex * 0.5}s cubic-bezier(0.1, 0.7, 0.4, 1)`;
                    reel.style.transform = `translateY(${finalPosition}px)`;
                }, 50);
            }
            
            function spin() {
                const bet = parseInt(BET_INPUT.value);
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π –ø–µ—Ä–µ–¥ —Å–ø–∏—Å–∞–Ω–∏–µ–º
                if (money < bet || bet <= 0 || isSpinning) {
                    RESULT_MESSAGE.textContent = "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ú–∞–Ω–∏ –∏–ª–∏ —Å—Ç–∞–≤–∫–∞ –Ω–µ–≤–µ—Ä–Ω–∞!";
                    return;
                }

                // 1. –°–Ω–∏–º–∞–µ–º —Å—Ç–∞–≤–∫—É –∏ –±–ª–æ–∫–∏—Ä—É–µ–º
                isSpinning = true;
                setMoney(money - bet); // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º
                RESULT_MESSAGE.textContent = "–ö–†–£–¢–ò–ú...";
                SPIN_BUTTON.classList.add('pulling');
                
                // –§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                const finalResults = [
                    SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)],
                    SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)],
                    SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)]
                ];

                // 2. –ó–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–∞—Ä–∞–±–∞–Ω–∞
                REELS.forEach((reel, index) => {
                    animateReel(index, finalResults[index]);
                });

                // 3. –ó–∞–¥–µ—Ä–∂–∫–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–∏–≥—Ä—ã—à–∞
                setTimeout(() => {
                    SPIN_BUTTON.classList.remove('pulling');
                    checkWin(finalResults, bet);
                    isSpinning = false;
                    setMoney(money); // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –ø–æ—Å–ª–µ —Ä–∞—Å—á–µ—Ç–∞
                }, 3000); 
            }

            function checkWin(results, bet) {
                const r1 = results[0];
                const r2 = results[1];
                const r3 = results[2];
                let winAmount = 0;
                let message = `–ü—Ä–æ–∏–≥—Ä—ã—à. (${r1} | ${r2} | ${r3})`;

                if (r1 === r2 && r2 === r3) {
                    // –¢—Ä–æ–π–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
                    if (r1 === '7Ô∏è‚É£') {
                        winAmount = bet * 50;
                        message = `ü§Øü§Øü§Ø –î–ñ–ï–ö–ü–û–¢ –ì–ï–ù–ò–Ø! –¢–†–ò 7Ô∏è‚É£! –í—ã–∏–≥—Ä—ã—à: +${winAmount} –ú–∞–Ω–∏!`;
                    } else {
                        winAmount = bet * 15;
                        message = `üéâ –¢–†–ò ${r1}! –ì–µ–Ω–∏–∞–ª—å–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à: +${winAmount} –ú–∞–Ω–∏!`;
                    }
                } else if (r1 === r2 || r2 === r3) {
                    // –î–≤–æ–π–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (–°—Ä–µ–¥–Ω–∏–π –≤—ã–∏–≥—Ä—ã—à)
                    winAmount = bet * 3;
                    message = `‚úÖ –î–≤–æ–π–Ω–æ–π ${r2}! –í—ã–∏–≥—Ä—ã—à: +${winAmount} –ú–∞–Ω–∏.`;
                } else if (r1 === r3) {
                    // –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ R1 –∏ R3
                    winAmount = bet * 2;
                    message = `üëå –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ R1 –∏ R3. –í—ã–∏–≥—Ä—ã—à: +${winAmount} –ú–∞–Ω–∏.`;
                }

                if (winAmount > 0) {
                    setMoney(money + winAmount);
                    RESULT_MESSAGE.style.color = '#00FF00';
                } else {
                    RESULT_MESSAGE.style.color = '#FF0000';
                }
                
                RESULT_MESSAGE.innerHTML = message;
            }

            SPIN_BUTTON.addEventListener('click', spin);
        };
    </script>
</body>
</html>
