<!DOCTYPE html>
<html lang="ru">
<head>
    <title>Кликер | [СИСТЕМА] v.1.0</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        /* ГЛОБАЛЬНЫЕ ПЕРЕМЕННЫЕ */
        :root {
            --bg-color: #0A0A0A; 
            --text-color: #F0F0F0; 
            --accent-pink: #FF33CC; 
            --accent-blue: #33CCFF; 
            --win-color: #00FF00; 
        }

        /* ОСНОВНЫЕ СТИЛИ */
        body { 
            font-family: 'Orbitron', sans-serif; 
            background-color: var(--bg-color); 
            color: var(--text-color); 
            text-align: center; 
            padding: 50px 20px; 
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        h1 {
            color: var(--accent-blue); 
            font-size: 3em; 
            font-weight: 900;
            text-shadow: 0 0 20px rgba(51, 204, 255, 1);
            margin-bottom: 40px;
        }

        /* --- СТИЛИ КЛИКЕРА (КИБЕР-СЕКЦИЯ) --- */
        .clicker-section {
            padding: 30px;
            background-color: #0D0D1A; /* Темный фон с оттенком */
            border: 5px solid var(--accent-pink);
            border-radius: 15px;
            box-shadow: 0 0 30px var(--accent-pink), 0 0 15px rgba(0, 0, 0, 0.5) inset;
            max-width: 450px;
            display: flex;
            flex-direction: column;
            align-items: center;
            transform: perspective(1000px) rotateX(2deg); /* Небольшой 3D эффект */
        }

        #balance-display {
            font-size: 2em;
            font-weight: 900;
            color: var(--win-color);
            margin-bottom: 20px;
            text-shadow: 0 0 15px rgba(0, 255, 0, 0.9);
        }

        #clicker-message {
            font-size: 1.2em;
            color: var(--text-color);
            margin-bottom: 25px;
        }

        #clicker-button {
            padding: 15px 40px;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.4em;
            font-weight: 700;
            background-color: var(--accent-blue); 
            color: var(--bg-color);
            border: 4px solid var(--accent-pink);
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 0 20px var(--accent-blue);
            transition: transform 0.1s, box-shadow 0.2s, background-color 0.2s;
        }
        
        #clicker-button:hover:enabled {
             background-color: var(--accent-pink);
             box-shadow: 0 0 25px var(--accent-pink);
        }

        #clicker-button:active:enabled {
            transform: scale(0.95);
            box-shadow: 0 0 10px var(--accent-blue);
        }
        
        #clicker-button:disabled {
            background-color: #333;
            box-shadow: none;
            cursor: not-allowed;
            color: #aaa;
        }
    </style>
</head>
<body>

    <h1>[СИСТЕМА] КЛИКЕР КРЕДИТА</h1>

    <div class="clicker-section">
        <div id="balance-display">КРЕДИТ: 0 М</div>
        <p id="clicker-message">Нажмите кнопку, чтобы мгновенно добавить +1 М.</p>
        <button id="clicker-button">КЛИКНИ +1 М</button>
    </div>

    <script>
        window.onload = function() {
            const BALANCE_DISPLAY = document.getElementById('balance-display');
            const CLICKER_BUTTON = document.getElementById('clicker-button');
            const CLICKER_MESSAGE = document.getElementById('clicker-message');

            // --- КОНФИГУРАЦИЯ БАЛАНСА И АНТИЧИТА ---
            // Предполагаем, что пользователь авторизован, если есть имя пользователя в LocalStorage
            const currentUsername = localStorage.getItem('denisKazakovUser');
            const isUserLoggedIn = !!currentUsername;
            const SECRET_KEY = 952; 
            const MONEY_PREFIX = 'money_';
            const CHECKSUM_PREFIX = 'checksum_';
            const INITIAL_MONEY = 100;
            const ANTI_CHEAT_RESET_AMOUNT = 10; 

            function getMoneyKey(username) { return MONEY_PREFIX + username; }
            function getChecksumKey(username) { return CHECKSUM_PREFIX + username; }

            function setMoney(amount) {
                if (!isUserLoggedIn) return 0; 
                const moneyKey = getMoneyKey(currentUsername);
                const checksumKey = getChecksumKey(currentUsername);
                const safeAmount = Math.max(0, amount); 
                const newChecksum = safeAmount + SECRET_KEY;
                
                localStorage.setItem(moneyKey, safeAmount);
                localStorage.setItem(checksumKey, newChecksum);
                
                updateBalanceDisplay(safeAmount);
                return safeAmount;
            }

            function getMoney() {
                if (!isUserLoggedIn) return 0;
                const moneyKey = getMoneyKey(currentUsername);
                const checksumKey = getChecksumKey(currentUsername);
                let storedMoney = parseInt(localStorage.getItem(moneyKey));
                let storedChecksum = parseInt(localStorage.getItem(checksumKey));
                
                if (isNaN(storedMoney) || isNaN(storedChecksum)) {
                    return setMoney(INITIAL_MONEY); // Инициализация
                }
                
                if (storedMoney + SECRET_KEY !== storedChecksum) {
                    // Античит: обнаружено несовпадение
                    CLICKER_MESSAGE.textContent = '[ВНИМАНИЕ] ОШИБКА БАЛАНСА. КРЕДИТ СБРОШЕН.';
                    return setMoney(ANTI_CHEAT_RESET_AMOUNT); 
                }
                
                return Math.max(0, storedMoney);
            }
            
            // --- ФУНКЦИИ ИНТЕРФЕЙСА ---

            function updateBalanceDisplay(currentMoney) {
                BALANCE_DISPLAY.textContent = `КРЕДИТ: ${currentMoney} М`;
                
                if (!isUserLoggedIn) {
                    CLICKER_MESSAGE.innerHTML = 'СИСТЕМА [ОТКЛЮЧЕНА]. ТРЕБУЕТСЯ <a href="login.html" style="color: var(--accent-pink);">АВТОРИЗАЦИЯ</a>.';
                    CLICKER_BUTTON.textContent = 'АВТОРИЗУЙСЯ';
                    CLICKER_BUTTON.disabled = true;
                } else {
                    CLICKER_BUTTON.textContent = `КЛИКНИ [+1 М] КРЕДИТ: ${currentMoney}`;
                    CLICKER_BUTTON.disabled = false;
                }
            }

            // --- ЛОГИКА КЛИКА ---
            function handleCick() {
                if (isUserLoggedIn) {
                    // Увеличиваем баланс на 1
                    setMoney(getMoney() + 1);
                }
            }

            // --- Инициализация ---
            updateBalanceDisplay(getMoney());
            CLICKER_BUTTON.addEventListener('click', handleCick);
        };
    </script>
</body>
</html>
